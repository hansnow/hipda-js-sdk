# 开发过程中遇到的一些坑

### 卡在了模拟登陆上

最开始先用 PC 版接口，还得先拿 token，再带着 token 去登陆，加上这个时候对 JS 生态的这些大坑还不是很了解，很自然的失败了。后来转变思路，用移动版的接口登陆，传参方便多了。但是又遇到了 cookie 管理大难题，为了解决这个问题，从`node-fetch`切换到`request`再换到`got`，确认了 cookie 管理没问题之后，还是没办法成功模拟登陆。

此时终于忍不住拿 python`requests`写了一版，都没调试，直接成功（妈的）。后来使用 postman 调试时发现，`Content-Length`部分很怪异，目测和`GBK`编码有关。于是决定不用`got`自带的奇怪的 Form Data 提交方式，手动拼接 FormData，终于成功了。
